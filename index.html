<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Laudo Neuropsicol√≥gico - Sistema Nuvem</title>
  <link rel="stylesheet" href="style.css?v=20260107_01" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!-- LOGIN OVERLAY -->
  <div id="loginOverlay" class="login-overlay">
    <div class="login-box">
      <h2>Bem-vindo</h2>
      <p>Acesse o Manain Sys com sua conta</p>

      <button onclick="fazerLoginGoogle()" class="btn-google" type="button" aria-label="Entrar com Google">
        <span class="google-icon" aria-hidden="true">
          <!-- √çcone Google (SVG) -->
          <svg width="20" height="20" viewBox="0 0 48 48">
            <path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303C33.659 32.658 29.2 36 24 36c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.047 6.053 29.243 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/>
            <path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 16.108 19.01 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.047 6.053 29.243 4 24 4c-7.682 0-14.35 4.34-17.694 10.691z"/>
            <path fill="#4CAF50" d="M24 44c5.103 0 9.834-1.958 13.36-5.142l-6.172-5.226C29.132 35.091 26.688 36 24 36c-5.177 0-9.623-3.317-11.292-7.946l-6.52 5.023C9.49 39.556 16.227 44 24 44z"/>
            <path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303a11.96 11.96 0 0 1-4.115 5.632l.003-.002 6.172 5.226C36.926 39.244 44 34 44 24c0-1.341-.138-2.65-.389-3.917z"/>
          </svg>
        </span>
        Entrar com Google
      </button>

      <div class="login-divider"><span>ou</span></div>

      <input id="emailLogin" type="email" placeholder="E-mail" autocomplete="email" />
      <input id="senhaLogin" type="password" placeholder="Senha" autocomplete="current-password" />

      <button onclick="fazerLoginEmailSenha()" class="btn-login-email" type="button">Entrar com e-mail</button>
      <button onclick="abrirModalCadastro()" class="btn-login-criar" type="button">Criar conta</button>
      <button onclick="abrirModalRecuperarSenha()" class="btn-login-link" type="button">Esqueci minha senha</button>


      <p id="loginError" class="error-msg"></p>
    </div>
  </div>

  <!-- APP PRINCIPAL -->
  <div id="appPrincipal" class="app-wrapper">
    <aside class="sidebar no-print">
      <div class="sidebar-header">
        <h2>Manain Sys</h2>
        <small id="userBadge" class="user-badge">‚Äî</small>
      </div>

      <div class="scroll-area">
        <div class="form-group db-section">
          <label>üìÇ Banco de Dados de Pacientes</label>

          <select id="listaPacientesSalvos" onchange="carregarPacienteDoBanco()">
            <option value="">Carregar Paciente...</option>
          </select>

          <div class="btn-row">
            <button class="btn-save" onclick="salvarPaciente()" type="button">üíæ Salvar</button>
            <button class="btn-delete" onclick="excluirPaciente()" type="button">üóëÔ∏è Excluir</button>
          </div>

          <button class="btn-logout" onclick="fazerLogout()" type="button">üö™ Sair</button>

          <button class="btn-resetpass" onclick="enviarLinkRedefinirSenha()" type="button">üîë Alterar senha</button>


          <div id="statusCheck" class="status">Aguardando a√ß√£o...</div>
        </div>

        <div class="form-group">
          <label>Paciente:</label>
          <input type="text" id="nomePaciente" oninput="atualizarRelatorio()" placeholder="Nome Completo"/>

          <label>Nascimento:</label>
          <input type="date" id="dataNasc" oninput="atualizarRelatorio()"/>

          <label>Data Aplica√ß√£o:</label>
          <input type="date" id="dataAplicacao" oninput="atualizarRelatorio()"/>
        </div>

        <div class="form-group">
          <label>Instrumento de Avalia√ß√£o:</label>
          <select id="testeSelecionado" onchange="resetarDadosTeste()">
            <option value="" disabled selected>-- Selecione --</option>

            <optgroup label="Intelig√™ncia (QI) - Verbal e Executivo">
              <option value="wisc">WISC-IV (6 a 16 anos)</option>
              <option value="wais">WAIS-III (16 a 90 anos)</option>
            </optgroup>

            <optgroup label="Intelig√™ncia N√£o-Verbal (Ideal p/ TEA/Fala)">
              <option value="sonr27">SON-R 2¬Ω-7 [a] (2 a 7 anos)</option>
              <option value="sonr640">SON-R 6-40 (6 a 40 anos)</option>
              <option value="raven">Matrizes de Raven (Geral)</option>
            </optgroup>

            <optgroup label="Comportamento Adaptativo (Essencial p/ DI)">
              <option value="abas">ABAS-3 (Todas as idades)</option>
              <option value="vinhais">Vinhais-3 (Todas as idades)</option>
            </optgroup>
          </select>

          <p class="hint">
            *Selecione o teste para liberar o preenchimento.
          </p>

          <button class="btn-primary" onclick="abrirChecklist()" type="button">Preencher Gr√°fico & Dados</button>
        </div>

        <div class="form-group">
          <button class="btn-print" onclick="window.print()" type="button">üñ®Ô∏è IMPRIMIR LAUDO</button>
        </div>
      </div>
    </aside>

    <main class="preview-container">
      <table class="tabela-layout">
        <thead>
          <tr>
            <td>
              <div class="header-space">&nbsp;</div>
              <div class="header-fixed">
                <div class="timbrado-top">
                  <img src="col.png" alt="Logo COL" class="logo-topo" />
                  <h3>CENTRO OCUPACIONAL DE LONDRINA</h3>
                  <p class="sub">Escola Manain - Educa√ß√£o Infantil e Ensino Fundamental,<br>na Modalidade Educa√ß√£o Especial</p>
                  <div class="legal">
                    <p>Fundado Em 22/06/1985 - CNPJ 78.962.263/0001-79</p>
                    <p>Utilidade P√∫blica Municipal Lei N¬∫ 3.956 de 24/04/1987</p>
                  </div>
                  <hr class="line" />
                </div>
              </div>
            </td>
          </tr>
        </thead>

        <tfoot>
          <tr>
            <td>
              <div class="footer-space">&nbsp;</div>
              <div class="footer-fixed">
                <div class="timbrado-bottom">
                  <hr class="line" />
                  <p>Rua das A√ßucenas N¬∫. 100 - Jd. Colina Verde - Fone/Fax: (43) 3328-4415.</p>
                  <p>CEP: 86050-570-Londrina/ PR &nbsp;|&nbsp; centroocupacional.secretaria@gmail.com</p>
                </div>
              </div>
            </td>
          </tr>
        </tfoot>

        <tbody>
          <tr>
            <td class="content-cell">
              <div class="documento-corpo">
                <h1 class="titulo-principal">RELAT√ìRIO DE AVALIA√á√ÉO NEUROPSICOL√ìGICA</h1>
        <div class="versao-sys" id="versaoSys"></div>

                <section>
                  <h4 class="titulo-secao">1. IDENTIFICA√á√ÉO</h4>
                  <table class="tabela-dados">
                    <tr>
                      <td width="60%"><strong>Paciente:</strong> <span id="viewNome"></span></td>
                      <td><strong>Nasc.:</strong> <span id="viewNasc"></span></td>
                    </tr>
                    <tr>
                      <td><strong>Idade:</strong> <span id="viewIdade"></span></td>
                      <td><strong>Data Avalia√ß√£o:</strong> <span id="viewData"></span></td>
                    </tr>
                  </table>
                </section>

                <section>
                  <h4 class="titulo-secao">2. MOTIVO DA AVALIA√á√ÉO</h4>
                  <div id="viewMotivo" class="texto-tecnico" contenteditable="true" spellcheck="false" role="textbox" aria-label="viewMotivo">
                    <p class="placeholder">[Preencha o nome e selecione o teste...]</p>
                  </div>
                </section>

                <section>
                  <h4 class="titulo-secao">3. AN√ÅLISE QUANTITATIVA E GR√ÅFICA</h4>
                  <div id="viewAnalise1" class="texto-tecnico" contenteditable="true" spellcheck="false" role="textbox" aria-label="viewAnalise1">
                    <p class="placeholder">[Aguardando Checklist...]</p>
                  </div>

                  <div id="boxGrafico" class="grafico-wrapper" style="display:none;">
                    <canvas id="graficoLinha"></canvas>
                    <p class="legenda-grafico">Figura 1: Comparativo entre Desempenho Ideal e Obtido.</p>
                  </div>

                  <div id="viewAnalise2" class="texto-tecnico" contenteditable="true" spellcheck="false" role="textbox" aria-label="viewAnalise2"></div>
                </section>

                <section>
                  <h4 class="titulo-secao">4. ENCAMINHAMENTOS</h4>
                  <div id="viewEncaminhamentos" class="texto-tecnico" contenteditable="true" spellcheck="false" role="textbox" aria-label="viewEncaminhamentos">
                    <p class="placeholder">[Aguardando An√°lise...]</p>
                  </div>
                </section>

                <section>
                  <h4 class="titulo-secao">5. CONCLUS√ÉO</h4>
                  <div id="viewConclusao" class="texto-tecnico" contenteditable="true" spellcheck="false" role="textbox" aria-label="viewConclusao">
                    <p class="placeholder">[Aguardando An√°lise...]</p>
                  </div>
                </section>

                <div class="assinatura-box">
                  <img src="asspsicologa.png" alt="Assinatura" class="img-ass" onerror="this.style.display='none'">
                  <p><strong>Jaqueline Gon√ßalves Malaquim</strong></p>
                  <p>Psic√≥loga - CRP 08/30548</p>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </main>
  </div>

  <!-- MODAL CHECKLIST -->
  <div id="modalChecklist" class="modal">
    <div class="modal-card">
      <h3>Pontua√ß√£o do Teste</h3>
      <div id="listaChecklist"></div>
      <div class="modal-botoes">
        <button class="btn-success" onclick="salvarChecklist()" type="button">Gerar Gr√°fico e An√°lise</button>
        <button class="btn-cancel" onclick="fecharChecklist()" type="button">Cancelar</button>
      </div>
    </div>
  </div>

  <script type="module" src="script.js?v=20260107_01"></script>

  <!-- ===== MODAL: CRIAR CONTA (E-MAIL/SENHA) ===== -->
  <div id="modalCadastro" class="modal" role="dialog" aria-modal="true" aria-labelledby="tituloCadastro">
    <div class="modal-card">
      <h3 id="tituloCadastro">Criar conta</h3>
      <div class="modal-body">
        <p class="modal-hint">Crie sua conta com e-mail e senha. A senha deve ter no m√≠nimo 6 caracteres.</p>

        <label for="cadEmail">E-mail</label>
        <input id="cadEmail" type="email" placeholder="E-mail" autocomplete="email" />

        <label for="cadSenha">Senha</label>
        <input id="cadSenha" type="password" placeholder="Senha" autocomplete="new-password" />

        <label for="cadSenha2">Confirmar senha</label>
        <input id="cadSenha2" type="password" placeholder="Confirmar senha" autocomplete="new-password" />

        <p id="cadError" class="error-msg"></p>
      </div>
      <div class="modal-botoes">
        <button class="btn-success" type="button" onclick="criarContaEmailSenha()">Criar conta</button>
        <button class="btn-cancel" type="button" onclick="fecharModalCadastro()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: RECUPERAR SENHA ===== -->
  <div id="modalRecuperarSenha" class="modal" role="dialog" aria-modal="true" aria-labelledby="tituloRecuperar">
    <div class="modal-card">
      <h3 id="tituloRecuperar">Recuperar senha</h3>
      <div class="modal-body">
        <p class="modal-hint">Informe seu e-mail. Voc√™ receber√° um link para redefinir sua senha.</p>

        <label for="recEmail">E-mail</label>
        <input id="recEmail" type="email" placeholder="E-mail" autocomplete="email" />

        <p id="recError" class="error-msg"></p>
      </div>
      <div class="modal-botoes">
        <button class="btn-primary" type="button" onclick="recuperarSenhaEmail()">Enviar link</button>
        <button class="btn-cancel" type="button" onclick="fecharModalRecuperarSenha()">Cancelar</button>
      </div>
    </div>
  </div>

</body>
</html>
